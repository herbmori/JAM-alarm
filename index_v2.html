<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì˜ìƒì²´í—˜ê³¼ ì•ŒëŒì•±</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="manifest" href="manifest.json" />
</head>

<body>
    <header>
        <h1>ì˜ìƒì²´í—˜ê³¼ ì•ŒëŒì•± (v2.0)</h1>
    </header>
    <main>
        <section class="theme-selector">
            <label for="themeSelect">í…Œë§ˆê´€ ì„ íƒ:</label>
            <select id="themeSelect"></select>
            <button id="addThemeBtn" style="margin-left: 10px; padding: 5px 10px; cursor: pointer;">í…Œë§ˆ ì¶”ê°€</button>
            <button id="deleteThemeBtn"
                style="margin-left: 10px; background-color: #ff4444; color: white; border: none; padding: 5px 10px; cursor: pointer;">í…Œë§ˆ
                ì‚­ì œ</button>
            <label class="switch">
                <input type="checkbox" id="themeToggle" />
                <span class="slider"></span>
            </label>
            <span id="toggleLabel">í™œì„±</span>
        </section>
        <section class="lead-time-selector">
            <label for="leadTimeSelect">ì•Œë¦¼ ì„ í–‰ ì‹œê°„ (ë¶„):</label>
            <select id="leadTimeSelect">
                <option value="2">2ë¶„</option>
                <option value="3">3ë¶„</option>
                <option value="5">5ë¶„</option>
                <option value="6" selected>6ë¶„</option>
                <option value="7">7ë¶„</option>
            </select>
        </section>
        <section class="settings-selector"
            style="margin-bottom: 20px; text-align: center; border-top: 1px solid #333; padding-top: 20px;">
            <p style="margin-bottom: 15px; font-weight: bold; font-size: 1.1rem; color: #fff;">ğŸ”” ì•Œë¦¼ ì„¤ì •</p>
            <div style="display: flex; justify-content: center; gap: 15px;">
                <button id="soundBtn"
                    style="background-color: #4CAF50; color: white; padding: 12px 24px; font-size: 1rem; border: none; border-radius: 8px; font-weight: bold;">ğŸ”Š
                    ì†Œë¦¬: ì¼œì§</button>
                <button id="vibrationBtn"
                    style="background-color: #4CAF50; color: white; padding: 12px 24px; font-size: 1rem; border: none; border-radius: 8px; font-weight: bold;">ğŸ“³
                    ì§„ë™: ì¼œì§</button>
            </div>
        </section>
        <section class="alarm-list">
            <h2 id="themeTitle"></h2>
            <ul id="alarmTimes"></ul>
            <button id="addTimeBtn">ì‹œê°„ ì¶”ê°€</button>
        </section>
    </main>
    <div id="alertModal" class="modal hidden">
        <div class="modal-content">
            <p id="alertMessage"></p>
            <button id="snoozeBtn">ìŠ¤ëˆ„ì¦ˆ (5ë¶„)</button>
            <button id="stopBtn">ë„ê¸°</button>
        </div>
    </div>

    <iframe id="dummySound" src="about:blank" allow="autoplay" style="display:none"></iframe>
    <script src="script.js"></script>
    <script>
        // ê°•ë ¥ ìºì‹œ ì´ˆê¸°í™” ë° ì„œë¹„ìŠ¤ ì›Œì»¤ ì—…ë°ì´íŠ¸
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(function (registrations) {
                for (let registration of registrations) {
                    registration.update();
                }
            });

            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js').then(reg => {
                    reg.onupdatefound = () => {
                        const installingWorker = reg.installing;
                        installingWorker.onstatechange = () => {
                            if (installingWorker.state === 'installed') {
                                if (navigator.serviceWorker.controller) {
                                    // ìƒˆ ë²„ì „ ë°œê²¬ ì‹œ ê°•ì œ ë¦¬ë¡œë“œ
                                    console.log('New content available; forcing reload.');
                                    window.location.reload();
                                }
                            }
                        };
                    };
                });
            });
        }
    </script>
</body>

</html>